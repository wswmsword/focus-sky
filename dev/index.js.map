{"version":3,"file":"index.js","sources":["../utils.js","../index.js"],"sourcesContent":["/** Object.prototype.toString.call 快捷方式 */\nexport const objToStr = obj => Object.prototype.toString.call(obj);\n\n/** 参数是否是对象 */\nexport const isObj = obj => objToStr(obj) === \"[object Object]\";\n\n/** 是否按下了 enter */\nexport const isEnterEvent = function(e) {\n  return e.key === \"Enter\" || e.keyCode === 13;\n};\n\n/** 按键是否是 esc */\nexport const isEscapeEvent = function (e) {\n  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;\n};\n\n/** 按键是否是 tab */\nexport const isTabEvent = function(e) {\n  return e.key === 'Tab' || e.keyCode === 9;\n};\n\n/** 是否是向前的 tab */\nexport const isTabForward = function(e) {\n  return isTabEvent(e) && !e.shiftKey;\n};\n\n/** 是否是向后的 tab */\nexport const isTabBackward = function(e) {\n  return isTabEvent(e) && e.shiftKey;\n};\n\n/** 延迟执行 */\nexport const delayToProcess = function(delay, processor) {\n  if (delay == null) processor();\n  else setTimeout(processor, delay);\n};\n\n/** document.activeElement 的快捷方式 */\nexport const getActiveElement = () => document.activeElement;","import { delayToProcess, getActiveElement, isEnterEvent, isEscapeEvent, isObj, isTabBackward, isTabForward } from \"./utils\";\n\n/** 焦点天空 */\nfunction focusky(config) {\n\n  const {\n      entriesMap, exitsMap,\n      root,\n      lists,\n      tabPortal, shiftTabPortal,\n      entriesFocusInfo, exitsFocusInfo, listsFocusInfo } = resolveFocusConfig(config);\n\n  const rootEle = document.querySelector(root);\n\n  /** 当前聚焦的列表元素是通过键盘导航聚焦的 */\n  let focusedListItemByNavList = false;\n  /** 当前聚焦的列表元素是通过点击聚焦的 */\n  let focusedListItemByMouse = false;\n\n  rootEle.addEventListener(\"keydown\", function(e) {\n\n    const target = e.target;\n    const selector = '#' + target.id;\n    const isEntry = entriesMap.has(selector);\n    const isExit = exitsMap.has(selector);\n    /** 包含当前元素的列表 */\n    const listHadItem = lists.find(li => li.includes(selector));\n    /** 是否是列表的元素 */\n    const isSequenceListItem = listHadItem != null;\n    // 当前在入口\n    if (isEntry) {\n      // 按下 Enter\n      if (isEnterEvent(e)) {\n        const entryFocusInfo = entriesFocusInfo.get(selector);\n        const { delay, toggleEntry, entered } = entryFocusInfo;\n        delayToProcess(delay, () => {\n          if (toggleEntry && entered) {\n            entryFocusInfo.entered = false;\n          } else {\n            focusByEntry(selector, e);\n            entryFocusInfo.entered = true;\n          }\n        });\n      }\n    }\n    // 当前在出口\n    if (isExit) {\n      // 按下 Escape\n      if (isEscapeEvent(e)) {\n        const { delay } = exitsFocusInfo.get(selector);\n        delayToProcess(delay, () => focusByExit(selector, e));\n      }\n    }\n    // 当前在列表（列表为序列模式）\n    if (isSequenceListItem) {\n      const curListInfo = listsFocusInfo.get(listHadItem);\n      const lastFocusIdx = curListInfo.lastFocusIdx;\n      const itemsLen = listHadItem.length;\n      if (isTabForward(e)) {\n        /** 下一个聚焦元素的 id */\n        const nextFocusIdx = (lastFocusIdx + 1) % itemsLen;\n        focusNext(nextFocusIdx);\n      }\n      if (isTabBackward(e)) {\n        const nextFocusIdx = (lastFocusIdx - 1 + itemsLen) % itemsLen;\n        focusNext(nextFocusIdx);\n      }\n\n      /** 聚焦下一个元素 */\n      function focusNext(nextFocusIdx) {\n        curListInfo.lastFocusIdx = nextFocusIdx; // 更新 lastFocusIdx\n        const nextFocusedEle = document.querySelector(listHadItem[nextFocusIdx]);\n        nextFocusedEle.focus(); // 聚焦\n        focusedListItemByNavList = true; // 用于矫正从外部进入列表的焦点\n        e.preventDefault(); // 阻止默认行为\n        delayToProcess(0, () => focusedListItemByNavList = false); // 下一个事件循环重置\n      };\n    } else {\n      if (isTabForward(e)) {\n        const rangeTailTarget = tabPortal.get(selector);\n        if (rangeTailTarget != null) {\n          document.querySelector(rangeTailTarget).focus(); // 聚焦\n          e.preventDefault(); // 阻止默认行为\n        }\n      }\n      if (isTabBackward(e)) {\n        const rangeHeadTarget = shiftTabPortal.get(selector);\n        document.querySelector(rangeHeadTarget).focus(); // 聚焦\n        e.preventDefault(); // 阻止默认行为\n      }\n    }\n  });\n\n  rootEle.addEventListener(\"click\", function(e) {\n\n    const target = e.target;\n    const selector = '#' + target.id;\n    const isEntry = entriesMap.has(selector);\n    const isExit = exitsMap.has(selector);\n    if (isEntry) {\n      const entryFocusInfo = entriesFocusInfo.get(selector);\n      const { delay, toggleEntry, entered } = entryFocusInfo;\n      delayToProcess(delay, () => {\n        if (toggleEntry && entered) {\n          entryFocusInfo.entered = false;\n        } else {\n          focusByEntry(selector, e);\n          updateListLastFocusIdx(selector);\n          entryFocusInfo.entered = true;\n        }\n      });\n    }\n    if (isExit) {\n      const { delay } = exitsFocusInfo.get(selector);\n      delayToProcess(delay, () => {\n        focusByExit(selector, e);\n        updateListLastFocusIdx(selector);\n      });\n    }\n  });\n\n  rootEle.addEventListener(\"focusin\", function(e) {\n\n    const target = e.target;\n    const selector = '#' + target.id;\n\n    // 如果不是通过导航聚焦的列表元素，则需要矫正\n    if (focusedListItemByNavList === false && focusedListItemByMouse === false) {\n      /** 包含当前元素的列表 */\n      const listHadItem = lists.find(li => li.includes(selector));\n      const curListInfo = listsFocusInfo.get(listHadItem);\n      if (curListInfo) {\n        const lastFocusIdx = curListInfo.lastFocusIdx;\n        document.querySelector(listHadItem[lastFocusIdx]).focus();\n        e.preventDefault();\n      }\n    }\n  });\n\n  rootEle.addEventListener(\"focusout\", function(e) {\n    setTimeout(() => {\n      const active = getActiveElement();\n      /** 失焦之后聚焦的元素 */\n      const activeSelector = '#' + active.id;\n      /** 失焦的元素 */\n      const prevActiveSelector = '#' + e.target.id;\n\n      /** 失焦元素所在列表 */\n      const listHadPrevActiveItem = lists.find(li => li.includes(prevActiveSelector));\n      /** 失焦元素是否是列表的元素 */\n      const isSequenceListPrevActiveItem = listHadPrevActiveItem != null;\n      const prevActiveListInfo = listsFocusInfo.get(listHadPrevActiveItem);\n      // 失焦元素是列表元素，并且有 outlist 退出类型\n      if (isSequenceListPrevActiveItem && prevActiveListInfo.outlistExit) {\n        if (!listHadPrevActiveItem.includes(activeSelector)) {\n          if (entriesMap.get(activeSelector) == null &&\n            exitsMap.get(activeSelector) == null &&\n            tabPortal.get(activeSelector) == null &&\n            shiftTabPortal.get(activeSelector) == null) {\n              document.querySelector(prevActiveListInfo.outlistExit).focus();\n              const entryFocusInfo = entriesFocusInfo.get(prevActiveListInfo.outlistExit);\n              entryFocusInfo.entered = false;\n            }\n        }\n      }\n    }, 0);\n  });\n\n  rootEle.addEventListener(\"mousedown\", function(e) {\n\n    const target = e.target;\n    const selector = '#' + target.id;\n    /** 包含当前元素的列表 */\n    const listHadItem = lists.find(li => li.includes(selector));\n    /** 是否是列表的元素 */\n    const isSequenceListItem = listHadItem != null;\n    if (isSequenceListItem) {\n      updateListLastFocusIdx(selector, listHadItem);\n      focusedListItemByMouse = true;\n      delayToProcess(0, () => focusedListItemByMouse = false);\n    }\n  });\n\n  /** 更新最后一次聚焦的列表元素 */\n  function updateListLastFocusIdx(selector, list) {\n    /** 包含当前元素的列表 */\n    const listHadItem = list || (lists.find(li => li.includes(selector)));\n    /** 是否是列表的元素 */\n    const isSequenceListItem = listHadItem != null;\n    if (isSequenceListItem) {\n      const curListInfo = listsFocusInfo.get(listHadItem);\n      curListInfo.lastFocusIdx = listHadItem.findIndex(li => li === selector);\n    }\n  }\n\n  /** 通过入口进入列表 */\n  function focusByEntry(selector, e) {\n    e.preventDefault();\n    const entryList = entriesMap.get(selector);\n    const curListInfo = listsFocusInfo.get(entryList);\n    document.querySelector(entryList[curListInfo?.lastFocusIdx || 0]).focus();\n  }\n\n  /** 通过出口返回至入口 */\n  function focusByExit(selector, e) {\n    e.preventDefault();\n    const exitTarget = exitsMap.get(selector);\n    document.querySelector(exitTarget).focus();\n    const entryFocusInfo = entriesFocusInfo.get(exitTarget);\n    entryFocusInfo.entered = false;\n  }\n}\n\n/** 分解焦点配置 */\nfunction resolveFocusConfig(config) {\n\n  // 根元素\n  const { root } = config;\n  // 一些映射，用于聚焦，例如入口映射、出口映射等\n  const maps = generateFocusDataByTravellingConfig(config);\n  return {\n    root,\n    ...maps,\n  };\n}\n\n/** 遍历配置，生成焦点相关的基础数据 */\nfunction generateFocusDataByTravellingConfig(\n  obj,\n  entriesMap = new Map(), exitsMap = new Map(),\n  lists = [],\n  tabPortal = new Map(), shiftTabPortal = new Map(),\n  entriesFocusInfo = new Map(), exitsFocusInfo = new Map(), listsFocusInfo = new Map()) {\n\n  // 是否为数组\n  if (Array.isArray(obj)) {\n\n    for (const ele of obj) {\n      generateFocusDataByTravellingConfig(ele, entriesMap, exitsMap, lists, tabPortal, shiftTabPortal, entriesFocusInfo, exitsFocusInfo, listsFocusInfo);\n    }\n  } else if (isObj(obj)) { // 是否为对象\n\n    const { entry, exit, list, range, delayEntry, delayExit, outlistExit, toggleEntry } = obj;\n    /** 是否是范围模式 */\n    const isRangeMode = range === true;\n    /** 不包含子信息的纯列表 */\n    const pureList = list.map(i => isObj(i) ? i.entry : i);\n    if (isRangeMode) { // 是否范围模式\n      const head = pureList[0];\n      const tail = pureList.at(-1);\n      tabPortal.set(tail, head);\n      shiftTabPortal.set(head, tail);\n    } else\n      lists.push(pureList);\n    entriesMap.set(entry, pureList);\n    exitsMap.set(exit, entry);\n    entriesFocusInfo.set(entry, {\n      delay: delayEntry,\n      entered: false, // 是否进入\n      toggleEntry, // 该入口是否同时支持退出？\n    });\n    exitsFocusInfo.set(exit, {\n      delay: delayExit\n    });\n    listsFocusInfo.set(pureList, {\n      lastFocusIdx: 0, // 最后一次聚焦的 id\n      outlistExit: outlistExit ? entry : false,\n    });\n    generateFocusDataByTravellingConfig(list, entriesMap, exitsMap, lists, tabPortal, shiftTabPortal, entriesFocusInfo, exitsFocusInfo, listsFocusInfo);\n  }\n\n  return { entriesMap, exitsMap, lists, tabPortal, shiftTabPortal, entriesFocusInfo, exitsFocusInfo, listsFocusInfo };\n}\n\nexport default focusky;"],"names":[],"mappings":";;;;;EAAA;EACO,MAAM,QAAQ,GAAG,GAAG,IAAI,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACnE;EACA;EACO,MAAM,KAAK,GAAG,GAAG,IAAI,QAAQ,CAAC,GAAG,CAAC,KAAK,iBAAiB,CAAC;AAChE;EACA;EACO,MAAM,YAAY,GAAG,SAAS,CAAC,EAAE;EACxC,EAAE,OAAO,CAAC,CAAC,GAAG,KAAK,OAAO,IAAI,CAAC,CAAC,OAAO,KAAK,EAAE,CAAC;EAC/C,CAAC,CAAC;AACF;EACA;EACO,MAAM,aAAa,GAAG,UAAU,CAAC,EAAE;EAC1C,EAAE,OAAO,CAAC,CAAC,GAAG,KAAK,QAAQ,IAAI,CAAC,CAAC,GAAG,KAAK,KAAK,IAAI,CAAC,CAAC,OAAO,KAAK,EAAE,CAAC;EACnE,CAAC,CAAC;AACF;EACA;EACO,MAAM,UAAU,GAAG,SAAS,CAAC,EAAE;EACtC,EAAE,OAAO,CAAC,CAAC,GAAG,KAAK,KAAK,IAAI,CAAC,CAAC,OAAO,KAAK,CAAC,CAAC;EAC5C,CAAC,CAAC;AACF;EACA;EACO,MAAM,YAAY,GAAG,SAAS,CAAC,EAAE;EACxC,EAAE,OAAO,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC;EACtC,CAAC,CAAC;AACF;EACA;EACO,MAAM,aAAa,GAAG,SAAS,CAAC,EAAE;EACzC,EAAE,OAAO,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC;EACrC,CAAC,CAAC;AACF;EACA;EACO,MAAM,cAAc,GAAG,SAAS,KAAK,EAAE,SAAS,EAAE;EACzD,EAAE,IAAI,KAAK,IAAI,IAAI,EAAE,SAAS,EAAE,CAAC;EACjC,OAAO,UAAU,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;EACpC,CAAC,CAAC;AACF;EACA;EACO,MAAM,gBAAgB,GAAG,MAAM,QAAQ,CAAC,aAAa;;ECpC5D;EACA,SAAS,OAAO,CAAC,MAAM,EAAE;AACzB;EACA,EAAE,MAAM;EACR,MAAM,UAAU,EAAE,QAAQ;EAC1B,MAAM,IAAI;EACV,MAAM,KAAK;EACX,MAAM,SAAS,EAAE,cAAc;EAC/B,MAAM,gBAAgB,EAAE,cAAc,EAAE,cAAc,EAAE,GAAG,kBAAkB,CAAC,MAAM,CAAC,CAAC;AACtF;EACA,EAAE,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;AAC/C;EACA;EACA,EAAE,IAAI,wBAAwB,GAAG,KAAK,CAAC;EACvC;EACA,EAAE,IAAI,sBAAsB,GAAG,KAAK,CAAC;AACrC;EACA,EAAE,OAAO,CAAC,gBAAgB,CAAC,SAAS,EAAE,SAAS,CAAC,EAAE;AAClD;EACA,IAAI,MAAM,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC;EAC5B,IAAI,MAAM,QAAQ,GAAG,GAAG,GAAG,MAAM,CAAC,EAAE,CAAC;EACrC,IAAI,MAAM,OAAO,GAAG,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;EAC7C,IAAI,MAAM,MAAM,GAAG,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;EAC1C;EACA,IAAI,MAAM,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC;EAChE;EACA,IAAI,MAAM,kBAAkB,GAAG,WAAW,IAAI,IAAI,CAAC;EACnD;EACA,IAAI,IAAI,OAAO,EAAE;EACjB;EACA,MAAM,IAAI,YAAY,CAAC,CAAC,CAAC,EAAE;EAC3B,QAAQ,MAAM,cAAc,GAAG,gBAAgB,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;EAC9D,QAAQ,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,OAAO,EAAE,GAAG,cAAc,CAAC;EAC/D,QAAQ,cAAc,CAAC,KAAK,EAAE,MAAM;EACpC,UAAU,IAAI,WAAW,IAAI,OAAO,EAAE;EACtC,YAAY,cAAc,CAAC,OAAO,GAAG,KAAK,CAAC;EAC3C,WAAW,MAAM;EACjB,YAAY,YAAY,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;EACtC,YAAY,cAAc,CAAC,OAAO,GAAG,IAAI,CAAC;EAC1C,WAAW;EACX,SAAS,CAAC,CAAC;EACX,OAAO;EACP,KAAK;EACL;EACA,IAAI,IAAI,MAAM,EAAE;EAChB;EACA,MAAM,IAAI,aAAa,CAAC,CAAC,CAAC,EAAE;EAC5B,QAAQ,MAAM,EAAE,KAAK,EAAE,GAAG,cAAc,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;EACvD,QAAQ,cAAc,CAAC,KAAK,EAAE,MAAM,WAAW,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC;EAC9D,OAAO;EACP,KAAK;EACL;EACA,IAAI,IAAI,kBAAkB,EAAE;EAC5B,MAAM,MAAM,WAAW,GAAG,cAAc,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;EAC1D,MAAM,MAAM,YAAY,GAAG,WAAW,CAAC,YAAY,CAAC;EACpD,MAAM,MAAM,QAAQ,GAAG,WAAW,CAAC,MAAM,CAAC;EAC1C,MAAM,IAAI,YAAY,CAAC,CAAC,CAAC,EAAE;EAC3B;EACA,QAAQ,MAAM,YAAY,GAAG,CAAC,YAAY,GAAG,CAAC,IAAI,QAAQ,CAAC;EAC3D,QAAQ,SAAS,CAAC,YAAY,CAAC,CAAC;EAChC,OAAO;EACP,MAAM,IAAI,aAAa,CAAC,CAAC,CAAC,EAAE;EAC5B,QAAQ,MAAM,YAAY,GAAG,CAAC,YAAY,GAAG,CAAC,GAAG,QAAQ,IAAI,QAAQ,CAAC;EACtE,QAAQ,SAAS,CAAC,YAAY,CAAC,CAAC;EAChC,OAAO;AACP;EACA;EACA,MAAM,SAAS,SAAS,CAAC,YAAY,EAAE;EACvC,QAAQ,WAAW,CAAC,YAAY,GAAG,YAAY,CAAC;EAChD,QAAQ,MAAM,cAAc,GAAG,QAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC,CAAC;EACjF,QAAQ,cAAc,CAAC,KAAK,EAAE,CAAC;EAC/B,QAAQ,wBAAwB,GAAG,IAAI,CAAC;EACxC,QAAQ,CAAC,CAAC,cAAc,EAAE,CAAC;EAC3B,QAAQ,cAAc,CAAC,CAAC,EAAE,MAAM,wBAAwB,GAAG,KAAK,CAAC,CAAC;EAClE,OACA,KAAK,MAAM;EACX,MAAM,IAAI,YAAY,CAAC,CAAC,CAAC,EAAE;EAC3B,QAAQ,MAAM,eAAe,GAAG,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;EACxD,QAAQ,IAAI,eAAe,IAAI,IAAI,EAAE;EACrC,UAAU,QAAQ,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,KAAK,EAAE,CAAC;EAC1D,UAAU,CAAC,CAAC,cAAc,EAAE,CAAC;EAC7B,SAAS;EACT,OAAO;EACP,MAAM,IAAI,aAAa,CAAC,CAAC,CAAC,EAAE;EAC5B,QAAQ,MAAM,eAAe,GAAG,cAAc,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;EAC7D,QAAQ,QAAQ,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,KAAK,EAAE,CAAC;EACxD,QAAQ,CAAC,CAAC,cAAc,EAAE,CAAC;EAC3B,OAAO;EACP,KAAK;EACL,GAAG,CAAC,CAAC;AACL;EACA,EAAE,OAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE;AAChD;EACA,IAAI,MAAM,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC;EAC5B,IAAI,MAAM,QAAQ,GAAG,GAAG,GAAG,MAAM,CAAC,EAAE,CAAC;EACrC,IAAI,MAAM,OAAO,GAAG,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;EAC7C,IAAI,MAAM,MAAM,GAAG,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;EAC1C,IAAI,IAAI,OAAO,EAAE;EACjB,MAAM,MAAM,cAAc,GAAG,gBAAgB,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;EAC5D,MAAM,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,OAAO,EAAE,GAAG,cAAc,CAAC;EAC7D,MAAM,cAAc,CAAC,KAAK,EAAE,MAAM;EAClC,QAAQ,IAAI,WAAW,IAAI,OAAO,EAAE;EACpC,UAAU,cAAc,CAAC,OAAO,GAAG,KAAK,CAAC;EACzC,SAAS,MAAM;EACf,UAAU,YAAY,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;EACpC,UAAU,sBAAsB,CAAC,QAAQ,CAAC,CAAC;EAC3C,UAAU,cAAc,CAAC,OAAO,GAAG,IAAI,CAAC;EACxC,SAAS;EACT,OAAO,CAAC,CAAC;EACT,KAAK;EACL,IAAI,IAAI,MAAM,EAAE;EAChB,MAAM,MAAM,EAAE,KAAK,EAAE,GAAG,cAAc,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;EACrD,MAAM,cAAc,CAAC,KAAK,EAAE,MAAM;EAClC,QAAQ,WAAW,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;EACjC,QAAQ,sBAAsB,CAAC,QAAQ,CAAC,CAAC;EACzC,OAAO,CAAC,CAAC;EACT,KAAK;EACL,GAAG,CAAC,CAAC;AACL;EACA,EAAE,OAAO,CAAC,gBAAgB,CAAC,SAAS,EAAE,SAAS,CAAC,EAAE;AAClD;EACA,IAAI,MAAM,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC;EAC5B,IAAI,MAAM,QAAQ,GAAG,GAAG,GAAG,MAAM,CAAC,EAAE,CAAC;AACrC;EACA;EACA,IAAI,IAAI,wBAAwB,KAAK,KAAK,IAAI,sBAAsB,KAAK,KAAK,EAAE;EAChF;EACA,MAAM,MAAM,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC;EAClE,MAAM,MAAM,WAAW,GAAG,cAAc,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;EAC1D,MAAM,IAAI,WAAW,EAAE;EACvB,QAAQ,MAAM,YAAY,GAAG,WAAW,CAAC,YAAY,CAAC;EACtD,QAAQ,QAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;EAClE,QAAQ,CAAC,CAAC,cAAc,EAAE,CAAC;EAC3B,OAAO;EACP,KAAK;EACL,GAAG,CAAC,CAAC;AACL;EACA,EAAE,OAAO,CAAC,gBAAgB,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE;EACnD,IAAI,UAAU,CAAC,MAAM;EACrB,MAAM,MAAM,MAAM,GAAG,gBAAgB,EAAE,CAAC;EACxC;EACA,MAAM,MAAM,cAAc,GAAG,GAAG,GAAG,MAAM,CAAC,EAAE,CAAC;EAC7C;EACA,MAAM,MAAM,kBAAkB,GAAG,GAAG,GAAG,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC;AACnD;EACA;EACA,MAAM,MAAM,qBAAqB,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,kBAAkB,CAAC,CAAC,CAAC;EACtF;EACA,MAAM,MAAM,4BAA4B,GAAG,qBAAqB,IAAI,IAAI,CAAC;EACzE,MAAM,MAAM,kBAAkB,GAAG,cAAc,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;EAC3E;EACA,MAAM,IAAI,4BAA4B,IAAI,kBAAkB,CAAC,WAAW,EAAE;EAC1E,QAAQ,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE;EAC7D,UAAU,IAAI,UAAU,CAAC,GAAG,CAAC,cAAc,CAAC,IAAI,IAAI;EACpD,YAAY,QAAQ,CAAC,GAAG,CAAC,cAAc,CAAC,IAAI,IAAI;EAChD,YAAY,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,IAAI,IAAI;EACjD,YAAY,cAAc,CAAC,GAAG,CAAC,cAAc,CAAC,IAAI,IAAI,EAAE;EACxD,cAAc,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAC,WAAW,CAAC,CAAC,KAAK,EAAE,CAAC;EAC7E,cAAc,MAAM,cAAc,GAAG,gBAAgB,CAAC,GAAG,CAAC,kBAAkB,CAAC,WAAW,CAAC,CAAC;EAC1F,cAAc,cAAc,CAAC,OAAO,GAAG,KAAK,CAAC;EAC7C,aAAa;EACb,SAAS;EACT,OAAO;EACP,KAAK,EAAE,CAAC,CAAC,CAAC;EACV,GAAG,CAAC,CAAC;AACL;EACA,EAAE,OAAO,CAAC,gBAAgB,CAAC,WAAW,EAAE,SAAS,CAAC,EAAE;AACpD;EACA,IAAI,MAAM,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC;EAC5B,IAAI,MAAM,QAAQ,GAAG,GAAG,GAAG,MAAM,CAAC,EAAE,CAAC;EACrC;EACA,IAAI,MAAM,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC;EAChE;EACA,IAAI,MAAM,kBAAkB,GAAG,WAAW,IAAI,IAAI,CAAC;EACnD,IAAI,IAAI,kBAAkB,EAAE;EAC5B,MAAM,sBAAsB,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;EACpD,MAAM,sBAAsB,GAAG,IAAI,CAAC;EACpC,MAAM,cAAc,CAAC,CAAC,EAAE,MAAM,sBAAsB,GAAG,KAAK,CAAC,CAAC;EAC9D,KAAK;EACL,GAAG,CAAC,CAAC;AACL;EACA;EACA,EAAE,SAAS,sBAAsB,CAAC,QAAQ,EAAE,IAAI,EAAE;EAClD;EACA,IAAI,MAAM,WAAW,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC1E;EACA,IAAI,MAAM,kBAAkB,GAAG,WAAW,IAAI,IAAI,CAAC;EACnD,IAAI,IAAI,kBAAkB,EAAE;EAC5B,MAAM,MAAM,WAAW,GAAG,cAAc,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;EAC1D,MAAM,WAAW,CAAC,YAAY,GAAG,WAAW,CAAC,SAAS,CAAC,EAAE,IAAI,EAAE,KAAK,QAAQ,CAAC,CAAC;EAC9E,KAAK;EACL,GAAG;AACH;EACA;EACA,EAAE,SAAS,YAAY,CAAC,QAAQ,EAAE,CAAC,EAAE;EACrC,IAAI,CAAC,CAAC,cAAc,EAAE,CAAC;EACvB,IAAI,MAAM,SAAS,GAAG,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;EAC/C,IAAI,MAAM,WAAW,GAAG,cAAc,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;EACtD,IAAI,QAAQ,CAAC,aAAa,CAAC,SAAS,CAAC,WAAW,EAAE,YAAY,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;EAC9E,GAAG;AACH;EACA;EACA,EAAE,SAAS,WAAW,CAAC,QAAQ,EAAE,CAAC,EAAE;EACpC,IAAI,CAAC,CAAC,cAAc,EAAE,CAAC;EACvB,IAAI,MAAM,UAAU,GAAG,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;EAC9C,IAAI,QAAQ,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC,KAAK,EAAE,CAAC;EAC/C,IAAI,MAAM,cAAc,GAAG,gBAAgB,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;EAC5D,IAAI,cAAc,CAAC,OAAO,GAAG,KAAK,CAAC;EACnC,GAAG;EACH,CAAC;AACD;EACA;EACA,SAAS,kBAAkB,CAAC,MAAM,EAAE;AACpC;EACA;EACA,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,CAAC;EAC1B;EACA,EAAE,MAAM,IAAI,GAAG,mCAAmC,CAAC,MAAM,CAAC,CAAC;EAC3D,EAAE,OAAO;EACT,IAAI,IAAI;EACR,IAAI,GAAG,IAAI;EACX,GAAG,CAAC;EACJ,CAAC;AACD;EACA;EACA,SAAS,mCAAmC;EAC5C,EAAE,GAAG;EACL,EAAE,UAAU,GAAG,IAAI,GAAG,EAAE,EAAE,QAAQ,GAAG,IAAI,GAAG,EAAE;EAC9C,EAAE,KAAK,GAAG,EAAE;EACZ,EAAE,SAAS,GAAG,IAAI,GAAG,EAAE,EAAE,cAAc,GAAG,IAAI,GAAG,EAAE;EACnD,EAAE,gBAAgB,GAAG,IAAI,GAAG,EAAE,EAAE,cAAc,GAAG,IAAI,GAAG,EAAE,EAAE,cAAc,GAAG,IAAI,GAAG,EAAE,EAAE;AACxF;EACA;EACA,EAAE,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;AAC1B;EACA,IAAI,KAAK,MAAM,GAAG,IAAI,GAAG,EAAE;EAC3B,MAAM,mCAAmC,CAAC,GAAG,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAE,cAAc,EAAE,gBAAgB,EAAE,cAAc,EAAE,cAAc,CAAC,CAAC;EACzJ,KAAK;EACL,GAAG,MAAM,IAAI,KAAK,CAAC,GAAG,CAAC,EAAE;AACzB;EACA,IAAI,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,UAAU,EAAE,SAAS,EAAE,WAAW,EAAE,WAAW,EAAE,GAAG,GAAG,CAAC;EAC9F;EACA,IAAI,MAAM,WAAW,GAAG,KAAK,KAAK,IAAI,CAAC;EACvC;EACA,IAAI,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;EAC3D,IAAI,IAAI,WAAW,EAAE;EACrB,MAAM,MAAM,IAAI,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC/B,MAAM,MAAM,IAAI,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACnC,MAAM,SAAS,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;EAChC,MAAM,cAAc,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;EACrC,KAAK;EACL,MAAM,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;EAC3B,IAAI,UAAU,CAAC,GAAG,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;EACpC,IAAI,QAAQ,CAAC,GAAG,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;EAC9B,IAAI,gBAAgB,CAAC,GAAG,CAAC,KAAK,EAAE;EAChC,MAAM,KAAK,EAAE,UAAU;EACvB,MAAM,OAAO,EAAE,KAAK;EACpB,MAAM,WAAW;EACjB,KAAK,CAAC,CAAC;EACP,IAAI,cAAc,CAAC,GAAG,CAAC,IAAI,EAAE;EAC7B,MAAM,KAAK,EAAE,SAAS;EACtB,KAAK,CAAC,CAAC;EACP,IAAI,cAAc,CAAC,GAAG,CAAC,QAAQ,EAAE;EACjC,MAAM,YAAY,EAAE,CAAC;EACrB,MAAM,WAAW,EAAE,WAAW,GAAG,KAAK,GAAG,KAAK;EAC9C,KAAK,CAAC,CAAC;EACP,IAAI,mCAAmC,CAAC,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAE,cAAc,EAAE,gBAAgB,EAAE,cAAc,EAAE,cAAc,CAAC,CAAC;EACxJ,GAAG;AACH;EACA,EAAE,OAAO,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAE,cAAc,EAAE,gBAAgB,EAAE,cAAc,EAAE,cAAc,EAAE,CAAC;EACtH;;;;;;;;"}